{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" type="text/css" href="/static/css/public_listing.css">
{% endblock %}

{% block content %}
<div>
    <h3>{{ category.replace('_slash_', '/') }}</h3>
    <a href="{{ [listing_url_base, category]|join('/') }}">&#8592 Return to search</a>
    <hr>
</div>
<div id="public-listing">
    <h4>{{ listing.name }}</h4>
    <div id="listing-address">
        {% if listing.address.street and
            listing.address.city and
            listing.address.state and
            listing.address.zip
        %}
            <p>
                {{ listing.address.street }}</br>
                {{ listing.address.city }}, {{ listing.address.state }} {{ listing.address.zip }}
            </p>
        {% endif %}
    </div>
    <div id="listing-subcategories-list">
        <strong>Categories:</strong>
        <span>{{ listing.tags.get(category, [])|join(', ')|replace('_slash_', '/') }}</span>
    </div>
    {% if listing.get('about', None) %}
    <div class="listing-info-section" id="additional-info-div">
        <h5>Description</h5>
        <p>{{ listing.about }}</p>
    </div>
    {% endif %}
    <div class="listing-info-section">
        <h5>Additional Information</h5>
        {% for contact in listing.contact_infos %}
        <p><strong>{{ contact.type }}:</strong> {{ contact.value }}</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
